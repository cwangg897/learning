
### 네 개의 영역
표현, 응용, 도메인, 인프라 스트럭쳐


### 표현계층
```
표현영역은 HTTP요청을 응용영역이 필요로 하는 형식으로 변환해서 
응용영역으로 전달하고 응용 영역의 응답을 HTTP응답으로 변환하여 전송한다.
HTTP요청을 객체타입으로 변환하고 객체를 JSON형식으로 변환하여 브라우저에게 전달한다.
```

### 응용계층
```
응용영역은 사용자에게 제공해야 할 기능을 구현한다.
응용 영역은 기능을 구현하기 위해 도메인 영역의 도메인 모델을 사용한다
응용 서비스는 로직을 직접 수행하기보다는 도메인 모델에 로직 수행을 위임한다.
```

### 도메인
```
도메인 영역은 도메인 모델을 구현한다.
도메인 모델은 도메인의 핵심 로직을 구현한다.
예를들어 주문 도메인은 배송지 변경, 결제 완료, 주문 총액 계산과 같은 핵심 로직을 도ㅓ메인 모델에서 구현한다.
```

### 인프라스트럭쳐
```
구현 기술에 대한 것을 다룬다.
RDBMS연동 메시지 큐에 메시지 전송이나 수신하는 기능 구현
Redis데이터 연동을 처리한다.
메일발송 기능인 SMTP사용하는거나 
응용영역에서 DB에 보관된 데이터가 필요하면 인프라 스트럭처의 영역의 DB모듈을 사용하여 데이터를 읽어온다.
```

### 계층 구조 아키텍쳐
```
계층구조는 특성상 상위 계층에서 하위 계층으로의 의존만 존재하고 
하위 계층은 상위 계층에 의존하지 않는다. 
표현 -> 응용 -> 도메인 -> 인프라스트럭처
응용은 인프라를 의존할 수 있는것이다. 스킵불가능한 것은 아니다.
그런데 이렇게 된다면 문제점이 발생한다.
1. 응용영역을 테스트코드 작성하는데 인프라스트럭처가 완벽동작해야한다.
2. 구현방식을 변경하기 어렵다. (인프라스트럭처의 특화된 코드가있기때문)
해결방법은 DIP이다
```

### DIP
```
고수준 모듈 : 응용영역 
저수준 모듈 : 정보읽어온느 모듈과, Drools로 룰을 실행하는 모듈
고수준 모듈이 제대로 동작하려면 저수준 모듈을 사용해야 한다.
그런데 고수준 모듈이 저수준 모듈을 사용하면 앞서 계층 구조 아키텍처에서 언급했던 두 가지 문제,
즉 구현 변경과 테스트가 어렵다는 문제가 발생한다.
```

### 핵심
```
DIP는 이 문제를 해결하기 위해 저수준 모듈이 고수준 모듈에 의존하도록 바꾼다.
인터페이스를 사용하는것이 중요하다
고수준 모듈에서 룰이 Drools인지 자바로 구현됬는지 알 필요가 없다.
고객 정보와 구매 정보에 룰을 적용해서 할인 금액을 구한다 라는것이 중요할 뿐이다.
룰을 이용한 할인 금액 계산은 고수준 모듈의 개념이므로 인터페이스는 고수준 모듈에 속한다.
Drools는 RuleDiscounter인터페이스에 의존하게 된다.
따라서 이를 구현한 것은 저수문 모듈이 된다.
```

### DIP도메인 관점
```
고수준 모듈이 저수준 모듈을 사용하려면 고수준 모듈이 저수준 모듈에 의존해야 하는데,
반대로 저수준 모듈이 고수준 모듈에 의존한다고 해서 이를 DIP의존 역전 원칙이라고 부른다.
DIP를 적용하면 앞의 문제였던 2가지를 해결할 수 있게 된다.

1. 구현 기술 교체 문제 : 인터페이스에 의존하므로, 실제 사용할 저수준 구현 객체는 의존 주입을 이용해서 전달받을 수 있다.
기술을 변경하더라도 고수준 모듈은 코드 수정이 필요없다. 저수준 모듈을 생성하는 코드만 변경하면 된다. 이것도 심지어 스프링사용하면 별로없다.
DDD가 스프링 최적화인 이유는 프레임워크 장점인 DIP
```


### 78페이지 그림 이해안감 
응용영역에도 서비스가있고 도메인 영역에도 서비스가 있다 라는것
 
